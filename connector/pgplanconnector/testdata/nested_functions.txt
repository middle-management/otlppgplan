2025-12-18 12:42:49.654 UTC [322] LOG:  duration: 0.091 ms  plan:
	{
	  "Query Text": "SELECT o.id, u.name, o.total\n    FROM orders o\n    JOIN users u ON o.user_id = u.id\n    WHERE o.id = p_order_id",
	  "Plan": {
	    "Node Type": "Nested Loop",
	    "Parallel Aware": false,
	    "Async Capable": false,
	    "Join Type": "Inner",
	    "Startup Cost": 0.56,
	    "Total Cost": 16.61,
	    "Plan Rows": 1,
	    "Plan Width": 18,
	    "Actual Startup Time": 0.085,
	    "Actual Total Time": 0.087,
	    "Actual Rows": 1,
	    "Actual Loops": 1,
	    "Inner Unique": true,
	    "Shared Hit Blocks": 6,
	    "Shared Read Blocks": 0,
	    "Shared Dirtied Blocks": 0,
	    "Shared Written Blocks": 0,
	    "Local Hit Blocks": 0,
	    "Local Read Blocks": 0,
	    "Local Dirtied Blocks": 0,
	    "Local Written Blocks": 0,
	    "Temp Read Blocks": 0,
	    "Temp Written Blocks": 0,
	    "Plans": [
	      {
	        "Node Type": "Index Scan",
	        "Parent Relationship": "Outer",
	        "Parallel Aware": false,
	        "Async Capable": false,
	        "Scan Direction": "Forward",
	        "Index Name": "orders_pkey",
	        "Relation Name": "orders",
	        "Alias": "o",
	        "Startup Cost": 0.28,
	        "Total Cost": 8.30,
	        "Plan Rows": 1,
	        "Plan Width": 14,
	        "Actual Startup Time": 0.042,
	        "Actual Total Time": 0.044,
	        "Actual Rows": 1,
	        "Actual Loops": 1,
	        "Index Cond": "(id = 10)",
	        "Rows Removed by Index Recheck": 0,
	        "Shared Hit Blocks": 3,
	        "Shared Read Blocks": 0,
	        "Shared Dirtied Blocks": 0,
	        "Shared Written Blocks": 0,
	        "Local Hit Blocks": 0,
	        "Local Read Blocks": 0,
	        "Local Dirtied Blocks": 0,
	        "Local Written Blocks": 0,
	        "Temp Read Blocks": 0,
	        "Temp Written Blocks": 0
	      },
	      {
	        "Node Type": "Index Scan",
	        "Parent Relationship": "Inner",
	        "Parallel Aware": false,
	        "Async Capable": false,
	        "Scan Direction": "Forward",
	        "Index Name": "users_pkey",
	        "Relation Name": "users",
	        "Alias": "u",
	        "Startup Cost": 0.28,
	        "Total Cost": 8.29,
	        "Plan Rows": 1,
	        "Plan Width": 12,
	        "Actual Startup Time": 0.028,
	        "Actual Total Time": 0.028,
	        "Actual Rows": 1,
	        "Actual Loops": 1,
	        "Index Cond": "(id = o.user_id)",
	        "Rows Removed by Index Recheck": 0,
	        "Shared Hit Blocks": 3,
	        "Shared Read Blocks": 0,
	        "Shared Dirtied Blocks": 0,
	        "Shared Written Blocks": 0,
	        "Local Hit Blocks": 0,
	        "Local Read Blocks": 0,
	        "Local Dirtied Blocks": 0,
	        "Local Written Blocks": 0,
	        "Temp Read Blocks": 0,
	        "Temp Written Blocks": 0
	      }
	    ]
	  }
	}
2025-12-18 12:42:49.654 UTC [322] CONTEXT:  SQL statement "SELECT o.id, u.name, o.total
	    FROM orders o
	    JOIN users u ON o.user_id = u.id
	    WHERE o.id = p_order_id"
	PL/pgSQL function get_order_details(integer) line 3 at RETURN QUERY
	SQL statement "SELECT *                          FROM get_order_details(p_order_id)"
	PL/pgSQL function process_order(integer) line 8 at SQL statement
2025-12-18 12:42:49.654 UTC [322] LOG:  duration: 1.895 ms  plan:
	{
	  "Query Text": "SELECT *                          FROM get_order_details(p_order_id)",
	  "Plan": {
	    "Node Type": "Function Scan",
	    "Parallel Aware": false,
	    "Async Capable": false,
	    "Function Name": "get_order_details",
	    "Alias": "get_order_details",
	    "Startup Cost": 0.25,
	    "Total Cost": 10.25,
	    "Plan Rows": 1000,
	    "Plan Width": 68,
	    "Actual Startup Time": 1.883,
	    "Actual Total Time": 1.883,
	    "Actual Rows": 1,
	    "Actual Loops": 1,
	    "Shared Hit Blocks": 18,
	    "Shared Read Blocks": 0,
	    "Shared Dirtied Blocks": 0,
	    "Shared Written Blocks": 0,
	    "Local Hit Blocks": 0,
	    "Local Read Blocks": 0,
	    "Local Dirtied Blocks": 0,
	    "Local Written Blocks": 0,
	    "Temp Read Blocks": 0,
	    "Temp Written Blocks": 0
	  }
	}
2025-12-18 12:42:49.654 UTC [322] CONTEXT:  SQL statement "SELECT *                          FROM get_order_details(p_order_id)"
	PL/pgSQL function process_order(integer) line 8 at SQL statement
2025-12-18 12:42:49.654 UTC [322] LOG:  duration: 0.018 ms  plan:
	{
	  "Query Text": "SELECT user_id                    FROM orders\n    WHERE id = p_order_id",
	  "Plan": {
	    "Node Type": "Index Scan",
	    "Parallel Aware": false,
	    "Async Capable": false,
	    "Scan Direction": "Forward",
	    "Index Name": "orders_pkey",
	    "Relation Name": "orders",
	    "Alias": "orders",
	    "Startup Cost": 0.28,
	    "Total Cost": 8.30,
	    "Plan Rows": 1,
	    "Plan Width": 4,
	    "Actual Startup Time": 0.017,
	    "Actual Total Time": 0.017,
	    "Actual Rows": 1,
	    "Actual Loops": 1,
	    "Index Cond": "(id = 10)",
	    "Rows Removed by Index Recheck": 0,
	    "Shared Hit Blocks": 3,
	    "Shared Read Blocks": 0,
	    "Shared Dirtied Blocks": 0,
	    "Shared Written Blocks": 0,
	    "Local Hit Blocks": 0,
	    "Local Read Blocks": 0,
	    "Local Dirtied Blocks": 0,
	    "Local Written Blocks": 0,
	    "Temp Read Blocks": 0,
	    "Temp Written Blocks": 0
	  }
	}
2025-12-18 12:42:49.654 UTC [322] CONTEXT:  SQL statement "SELECT user_id                    FROM orders
	    WHERE id = p_order_id"
	PL/pgSQL function process_order(integer) line 12 at SQL statement
2025-12-18 12:42:49.655 UTC [322] LOG:  duration: 0.129 ms  plan:
	{
	  "Query Text": "SELECT\n        COUNT(*)::BIGINT,\n        SUM(total),\n        AVG(total)\n    FROM orders\n    WHERE user_id = p_user_id\n      AND status = 'completed'",
	  "Plan": {
	    "Node Type": "Aggregate",
	    "Strategy": "Plain",
	    "Partial Mode": "Simple",
	    "Parallel Aware": false,
	    "Async Capable": false,
	    "Startup Cost": 19.17,
	    "Total Cost": 19.18,
	    "Plan Rows": 1,
	    "Plan Width": 72,
	    "Actual Startup Time": 0.127,
	    "Actual Total Time": 0.128,
	    "Actual Rows": 1,
	    "Actual Loops": 1,
	    "Shared Hit Blocks": 8,
	    "Shared Read Blocks": 0,
	    "Shared Dirtied Blocks": 0,
	    "Shared Written Blocks": 0,
	    "Local Hit Blocks": 0,
	    "Local Read Blocks": 0,
	    "Local Dirtied Blocks": 0,
	    "Local Written Blocks": 0,
	    "Temp Read Blocks": 0,
	    "Temp Written Blocks": 0,
	    "Plans": [
	      {
	        "Node Type": "Bitmap Heap Scan",
	        "Parent Relationship": "Outer",
	        "Parallel Aware": false,
	        "Async Capable": false,
	        "Relation Name": "orders",
	        "Alias": "orders",
	        "Startup Cost": 4.32,
	        "Total Cost": 19.16,
	        "Plan Rows": 2,
	        "Plan Width": 6,
	        "Actual Startup Time": 0.042,
	        "Actual Total Time": 0.070,
	        "Actual Rows": 3,
	        "Actual Loops": 1,
	        "Recheck Cond": "(user_id = 729)",
	        "Rows Removed by Index Recheck": 0,
	        "Filter": "((status)::text = 'completed'::text)",
	        "Rows Removed by Filter": 3,
	        "Exact Heap Blocks": 6,
	        "Lossy Heap Blocks": 0,
	        "Shared Hit Blocks": 8,
	        "Shared Read Blocks": 0,
	        "Shared Dirtied Blocks": 0,
	        "Shared Written Blocks": 0,
	        "Local Hit Blocks": 0,
	        "Local Read Blocks": 0,
	        "Local Dirtied Blocks": 0,
	        "Local Written Blocks": 0,
	        "Temp Read Blocks": 0,
	        "Temp Written Blocks": 0,
	        "Plans": [
	          {
	            "Node Type": "Bitmap Index Scan",
	            "Parent Relationship": "Outer",
	            "Parallel Aware": false,
	            "Async Capable": false,
	            "Index Name": "idx_orders_user_id",
	            "Startup Cost": 0.00,
	            "Total Cost": 4.32,
	            "Plan Rows": 5,
	            "Plan Width": 0,
	            "Actual Startup Time": 0.018,
	            "Actual Total Time": 0.018,
	            "Actual Rows": 6,
	            "Actual Loops": 1,
	            "Index Cond": "(user_id = 729)",
	            "Shared Hit Blocks": 2,
	            "Shared Read Blocks": 0,
	            "Shared Dirtied Blocks": 0,
	            "Shared Written Blocks": 0,
	            "Local Hit Blocks": 0,
	            "Local Read Blocks": 0,
	            "Local Dirtied Blocks": 0,
	            "Local Written Blocks": 0,
	            "Temp Read Blocks": 0,
	            "Temp Written Blocks": 0
	          }
	        ]
	      }
	    ]
	  }
	}
2025-12-18 12:42:49.655 UTC [322] CONTEXT:  SQL statement "SELECT
	        COUNT(*)::BIGINT,
	        SUM(total),
	        AVG(total)
	    FROM orders
	    WHERE user_id = p_user_id
	      AND status = 'completed'"
	PL/pgSQL function get_user_order_stats(integer) line 3 at SQL statement
	SQL statement "SELECT *                       FROM get_user_order_stats(v_user_id)"
	PL/pgSQL function process_order(integer) line 17 at SQL statement
2025-12-18 12:42:49.655 UTC [322] ERROR:  query has no destination for result data
2025-12-18 12:42:49.655 UTC [322] HINT:  If you want to discard the results of a SELECT, use PERFORM instead.
2025-12-18 12:42:49.655 UTC [322] CONTEXT:  PL/pgSQL function get_user_order_stats(integer) line 3 at SQL statement
	SQL statement "SELECT *                       FROM get_user_order_stats(v_user_id)"
	PL/pgSQL function process_order(integer) line 17 at SQL statement
2025-12-18 12:42:49.655 UTC [322] STATEMENT:  select * from process_order(10)
	;
